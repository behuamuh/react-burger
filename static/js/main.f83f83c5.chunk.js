(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{122:function(e,t,n){e.exports={items:"ingredients-category_items__7Zb2N"}},123:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__AKixE"}},125:function(e,t,n){e.exports={content:"orders-list_content__3-TZw"}},139:function(e,t,n){},18:function(e,t,n){e.exports={burger_constructor:"burger-constructor_burger_constructor__jXyGp",elements:"burger-constructor_elements__1mnPz",total:"burger-constructor_total__2z4fk",cost:"burger-constructor_cost__3NqMY",text:"burger-constructor_text__1C_uq",noBuns:"burger-constructor_noBuns__3BH7a",noBunsTop:"burger-constructor_noBunsTop__w5Mru",noBunsBottom:"burger-constructor_noBunsBottom__1fruv",dragActive:"burger-constructor_dragActive__1YQQm",element:"burger-constructor_element__10R7L",element_fullwidth:"burger-constructor_element_fullwidth__28_mc"}},217:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(44),s=n.n(c),i=n(5),o=n(14),l=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,234)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},u=(n(139),n(8)),d=n(35),j=n.n(d),b=n(28),m=n.n(b),p=n(6),_=n(0),O=function(){var e=!!Object(u.j)({path:"/",exact:!0}),t=!!Object(u.j)("/feed"),n=!!Object(u.j)("/profile"),a=Object(i.c)((function(e){var t;return null===(t=e.user.data)||void 0===t?void 0:t.name}));return Object(_.jsx)("header",{className:m.a.header,children:Object(_.jsxs)("nav",{className:"".concat(m.a.menu," pt-4 pb-4"),children:[Object(_.jsxs)("div",{className:m.a.menu_part_left,children:[Object(_.jsxs)(o.c,{to:"/",className:m.a.link,activeClassName:m.a.link_active,exact:!0,children:[Object(_.jsx)(p.BurgerIcon,{type:e?"primary":"secondary"}),Object(_.jsx)("p",{className:"text text_type_main-default ml-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(_.jsxs)(o.c,{to:"/feed",className:"".concat(m.a.link," ml-10"),activeClassName:m.a.link_active,children:[Object(_.jsx)(p.ListIcon,{type:t?"primary":"secondary"}),Object(_.jsx)("p",{className:"text text_type_main-default ml-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(_.jsx)("div",{className:m.a.logo,children:Object(_.jsx)(p.Logo,{})}),Object(_.jsxs)(o.c,{to:"/profile",className:"".concat(m.a.link," ").concat(m.a.link_position_last),activeClassName:m.a.link_active,children:[Object(_.jsx)(p.ProfileIcon,{type:n?"primary":"secondary"}),Object(_.jsx)("p",{className:"text text_type_main-default ml-2",children:a||"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})},x=n(225),f=n(128),h=n(68),g=n.n(h),y=n(10),v=n(70),N=n(229),E=n(54),C=n.n(E),T=n(12),R=n.n(T),S=(R.a.shape({_id:R.a.string.isRequired,name:R.a.string.isRequired,type:R.a.oneOf(["bun","main","sauce"]).isRequired,proteins:R.a.number.isRequired,fat:R.a.number.isRequired,carbohydrates:R.a.number.isRequired,calories:R.a.number.isRequired,price:R.a.number.isRequired,image:R.a.string.isRequired,image_large:R.a.string.isRequired,image_mobile:R.a.string.isRequired}),R.a.shape({_id:R.a.string.isRequired,status:R.a.string.isRequired,name:R.a.string.isRequired,createdAt:R.a.string.isRequired,updatedAt:R.a.string.isRequired,number:R.a.number.isRequired}),function(e){var t=e.ingredientData,n=e.count,a=Object(u.h)(),r=t.image,c=t.price,s=t.name,i=t._id,l=Object(N.a)((function(){return{type:"NEW_INGREDIENT",item:t,collect:function(e){return{isDragging:e.isDragging(),handlerId:e.getHandlerId()}}}})),d=Object(y.a)(l,2),j=d[0].isDragging,b=d[1],m=j?.4:1;return Object(_.jsxs)(o.b,{className:C.a.article,to:{pathname:"/ingredients/".concat(i),state:{background:a}},style:{opacity:m},ref:b,children:[n&&Object(_.jsx)(p.Counter,{count:n}),Object(_.jsx)("img",{className:C.a.img,src:r,alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430."}),Object(_.jsxs)("div",{className:"".concat(C.a.cost," mt-2 mb-2"),children:[Object(_.jsx)("p",{className:"text text_type_digits-default mr-2",children:c}),Object(_.jsx)(p.CurrencyIcon,{})]}),Object(_.jsx)("p",{className:"text text_type_main-default ".concat(C.a.text),children:s})]})}),I=r.a.memo(S),k=n(122),w=n.n(k),U=r.a.forwardRef((function(e,t){var n=e.title,r=e.titleId,c=e.ingredients,s=e.onIngredientClick,o=Object(i.c)((function(e){return e.burgerConstructor})),l=Object(a.useMemo)((function(){var e=o.bun,t=o.ingredients,n={};return t.forEach((function(e){n[e._id]||(n[e._id]=0),n[e._id]++})),e&&(n[e._id]=2),n}),[o]);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("h3",{className:"text text_type_main-medium mt-10 mb-6",id:r,children:n}),Object(_.jsx)("div",{className:w.a.items,ref:t,children:c.map((function(e){return Object(_.jsx)(I,{ingredientData:e,count:l[e._id],onClick:s},e._id)}))})]})})),D=r.a.memo(U),A=n(69),B=n.n(A),q=function(){var e=r.a.useState("buns"),t=Object(y.a)(e,2),n=t[0],c=t[1],s=Object(i.c)((function(e){return e.ingredients.data})),o=Object(v.a)({threshold:0}),l=Object(y.a)(o,2),u=l[0],d=l[1],j=Object(v.a)({threshold:0}),b=Object(y.a)(j,2),m=b[0],O=b[1],x=Object(v.a)({threshold:0}),f=Object(y.a)(x,2),h=f[0],g=f[1];r.a.useEffect((function(){d?c("buns"):g?c("sauces"):O&&c("mains")}),[d,O,g]);var N=function(e){c(e);var t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})},E=Object(a.useMemo)((function(){return s.filter((function(e){return"bun"===e.type}))}),[s]),C=Object(a.useMemo)((function(){return s.filter((function(e){return"main"===e.type}))}),[s]),T=Object(a.useMemo)((function(){return s.filter((function(e){return"sauce"===e.type}))}),[s]);return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("section",{className:B.a.burger_ingredients,children:[Object(_.jsx)("nav",{children:Object(_.jsxs)("ul",{className:B.a.menu,children:[Object(_.jsx)(p.Tab,{value:"buns",active:"buns"===n,onClick:N,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(_.jsx)(p.Tab,{value:"mains",active:"mains"===n,onClick:N,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(_.jsx)(p.Tab,{value:"sauces",active:"sauces"===n,onClick:N,children:"\u0421\u043e\u0443\u0441\u044b"})]})}),Object(_.jsxs)("div",{className:B.a.content,children:[Object(_.jsx)(D,{title:"\u0411\u0443\u043b\u043a\u0438",titleId:"buns",ingredients:E,ref:u}),Object(_.jsx)(D,{title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",titleId:"mains",ingredients:C,ref:m}),Object(_.jsx)(D,{title:"\u0421\u043e\u0443\u0441\u044b",titleId:"sauces",ingredients:T,ref:h})]})]})})},L=n(41),P=n(230),F=n(18),G=n.n(F),M=n(45),z=n.n(M),J=n(123),H=n.n(J),Q=function(e){var t=e.onClick;return Object(_.jsx)("div",{className:H.a.overlay,onClick:t})},W=document.getElementById("modals"),Y=function(e){var t=e.title,n=e.onClose,a=e.children;return r.a.useEffect((function(){var e=function(e){"Escape"===e.key&&n()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[n]),s.a.createPortal(Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:z.a.modal,children:[Object(_.jsxs)("div",{className:z.a.header,children:[Object(_.jsx)("h3",{className:"".concat(z.a.title," text text_type_main-large"),children:t}),Object(_.jsx)("button",{className:z.a.button,type:"button",children:Object(_.jsx)(p.CloseIcon,{type:"primary",onClick:n})})]}),Object(_.jsx)("div",{className:z.a.content,children:a})]}),Object(_.jsx)(Q,{onClick:n})]}),W)},V=n(71),X=n.n(V),K=n.p+"static/media/done.85c3a14d.svg",Z=function(e){var t=e.orderNumber;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("h2",{className:"".concat(X.a.title," text text_type_digits-large mt-2 mb-4"),children:t}),Object(_.jsx)("p",{className:"text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(_.jsx)("img",{className:X.a.img,src:K,alt:"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0437\u0430\u043a\u0430\u0437\u0430."}),Object(_.jsx)("p",{className:"text text_type_main-default mb-1",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(_.jsx)("p",{className:"".concat(X.a.text," text text_type_main-default"),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},$=n(95),ee=n.n($),te=n(2),ne=n(232),ae="CONSTRUCTOR_ADD",re="CONSTRUCTOR_DELETE",ce="CONSTRUCTOR_REORDER",se="CONSTRUCTOR_RESET",ie=function(e){var t=e.ingredient,n=e.index,r=Object(i.b)(),c=Object(a.useRef)(null),s=Object(P.a)({accept:["SORT_INGREDIENT"],collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var a,s=e.index,i=n;if(s!==i){var o=null===(a=c.current)||void 0===a?void 0:a.getBoundingClientRect(),l=(o.bottom-o.top)/2,u=t.getClientOffset().y-o.top;s<i&&u<l||s>i&&u>l||(r({type:ce,payload:{from:s,to:i}}),e.index=i)}}}),o=Object(y.a)(s,2),l=o[0].handlerId,u=o[1],d=Object(N.a)({type:"SORT_INGREDIENT",item:function(){return{ingredient:t,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),j=Object(y.a)(d,2),b=j[0].isDragging?0:1;return(0,j[1])(u(c)),Object(_.jsxs)("li",{className:"".concat(ee.a.element," mb-4 mr-2"),style:{opacity:b},"data-handler-id":l,ref:c,children:[Object(_.jsx)(p.DragIcon,{}),Object(_.jsx)("div",{className:"".concat(ee.a.element_fullwidth," ml-2"),children:Object(_.jsx)(p.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:function(){return r({type:re,payload:n})}})})]})},oe=r.a.memo(ie),le=n(96),ue=n.n(le),de=n(124);function je(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function be(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(n=Object(te.a)({path:"/"},n)).expires;if("number"==typeof a&&a){var r=new Date;r.setTime(r.getTime()+1e3*a),a=n.expires=r}a&&a.toUTCString&&(n.expires=a.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var s in n){c+="; "+s;var i=n[s];!0!==i&&(c+="="+i)}document.cookie=c}var me="https://norma.nomoreparties.space/api",pe=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},_e=function(){return fetch("".concat(me,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(pe).then((function(e){return e.success?(localStorage.setItem("refreshToken",e.refreshToken),be("accessToken",e.accessToken),e):Promise.reject(e)}))},Oe=function(){var e=Object(de.a)(ue.a.mark((function e(t,n){var a,r,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n);case 3:return a=e.sent,e.next=6,pe(a);case 6:case 21:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(0),"jwt expired"!==e.t0.message){e.next=24;break}return e.next=14,_e();case 14:return r=e.sent,n.headers.authorization=r.accessToken,e.next=18,fetch(t,n);case 18:return c=e.sent,e.next=21,pe(c);case 24:return e.abrupt("return",Promise.reject(e.t0));case 25:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),xe="CREATE_ORDER_REQUEST",fe="CREATE_ORDER_SUCCESS",he="CREATE_ORDER_FAILED",ge="GET_ORDER_REQUEST",ye="GET_ORDER_SUCCESS",ve="GET_ORDER_FAILED",Ne="RESET_ORDER",Ee=function(e){return function(t){return t({type:xe}),(n=e,Oe("".concat(me,"/orders"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",authorization:je("accessToken")},body:JSON.stringify({ingredients:n})}).then((function(e){return(null===e||void 0===e?void 0:e.success)?e:Promise.reject(e)}))).then((function(e){t({type:fe,payload:e}),t({type:se})})).catch((function(e){t({type:he,payload:e})}));var n}},Ce=function(e){return function(t){return t({type:ge}),function(e){return fetch("".concat(me,"/orders/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then(pe)}(e).then((function(e){t({type:ye,payload:e})})).catch((function(e){t({type:ve,payload:e})}))}},Te=n(97),Re=n.n(Te),Se=function(){return Object(_.jsx)("div",{className:Re.a.preloader,children:Object(_.jsx)("div",{className:Re.a.preloader_circle})})},Ie=function(){var e=Object(u.g)(),t=Object(i.b)(),n=Object(i.c)((function(e){return e.burgerConstructor})),r=Object(i.c)((function(e){return e.order.isLoading})),c=Object(i.c)((function(e){return e.order.data})),s=Object(i.c)((function(e){return e.user.data})),o=Object(P.a)((function(){return{accept:"NEW_INGREDIENT",drop:function(e){return t((n=e,{type:ae,payload:Object(te.a)(Object(te.a)({},n),{},{id:Object(ne.a)()})}));var n},collect:function(e){return{canDrop:e.canDrop(),dragItem:e.getItem(),isOver:e.isOver()}}}})),l=Object(y.a)(o,2),d=l[0],j=d.canDrop,b=d.dragItem,m=l[1],O=j&&b&&"bun"===b.type,x=j&&b&&"bun"!==b.type,f=Object(a.useMemo)((function(){return(n.bun?2*n.bun.price:0)+n.ingredients.reduce((function(e,t){return e+t.price}),0)}),[n]);return Object(_.jsxs)("section",{className:G.a.burger_constructor,ref:m,children:[n.bun?Object(_.jsx)("div",{className:"".concat(G.a.element," mb-4 mr-4"),children:Object(_.jsx)(p.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(n.bun.name," (\u0432\u0435\u0440\u0445)"),price:n.bun.price,thumbnail:n.bun.image})}):Object(_.jsx)("div",{className:"".concat(G.a.noBuns," ").concat(O&&G.a.dragActive," ").concat(G.a.noBunsTop," ml-8 mb-4 mr-5 text text_type_main-default"),children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0438"}),Object(_.jsx)("ul",{className:G.a.elements,children:n.ingredients.length>0?n.ingredients.map((function(e,t){return Object(_.jsx)(oe,{ingredient:e,index:t},e.id)})):Object(_.jsx)("div",{className:"".concat(G.a.noBuns," ").concat(x&&G.a.dragActive," ml-8 mb-4 mr-5 text text_type_main-default"),children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0430\u0447\u0438\u043d\u043a\u0443"})}),n.bun?Object(_.jsx)("div",{className:"".concat(G.a.element," mt-4 mr-4"),children:Object(_.jsx)(p.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(n.bun.name," (\u043d\u0438\u0437)"),price:n.bun.price,thumbnail:n.bun.image})}):Object(_.jsx)("div",{className:"".concat(G.a.noBuns," ").concat(O&&G.a.dragActive," ").concat(G.a.noBunsBottom," ml-8 mb-4 mr-5 text text_type_main-default"),children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0438"}),Object(_.jsxs)("div",{className:"".concat(G.a.total," mt-10 mr-4"),children:[Object(_.jsxs)("div",{className:"".concat(G.a.cost," mr-10"),children:[Object(_.jsx)("p",{className:"text ".concat(G.a.text," mr-2"),children:f}),Object(_.jsx)(p.CurrencyIcon,{})]}),Object(_.jsx)(p.Button,{type:"primary",size:"large",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437",onClick:function(){s?n.bun&&!r&&t(Ee([n.bun._id].concat(Object(L.a)(n.ingredients.map((function(e){return e._id}))),[n.bun._id]))):e.push("/login")}})]}),(r||c)&&Object(_.jsx)(Y,{onClose:function(){return t({type:Ne})},title:r?"\u041e\u0444\u043e\u0440\u043c\u043b\u044f\u0435\u043c \u0437\u0430\u043a\u0430\u0437...":"",children:r?Object(_.jsx)(Se,{}):Object(_.jsx)(Z,{orderNumber:c.order.number})})]})},ke=function(){return Object(i.c)((function(e){return e.ingredients.isLoading}))?Object(_.jsx)(Se,{}):Object(_.jsxs)("main",{className:g.a.containerMain,children:[Object(_.jsx)("h1",{className:"".concat(g.a.title," text text_type_main-large mt-10 mb-5"),children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(_.jsx)(x.a,{backend:f.a,children:Object(_.jsxs)("div",{className:"".concat(g.a.main),children:[Object(_.jsx)(q,{}),Object(_.jsx)(Ie,{})]})})]})},we=n(9),Ue=n.n(we),De="AUTH_CHECKED",Ae="REGISTER_USER_REQEST",Be="REGISTER_USER_SUCCESS",qe="REGISTER_USER_FAILED",Le="LOGIN_USER_REQEST",Pe="LOGIN_USER_SUCCESS",Fe="LOGIN_USER_FAILED",Ge="GET_USER_REQEST",Me="GET_USER_SUCCESS",ze="GET_USER_FAILED",Je="UPDATE_USER_REQEST",He="UPDATE_USER_SUCCESS",Qe="UPDATE_USER_FAILED",We="USER_LOGOUT",Ye=function(){return function(e){return fetch("".concat(me,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(pe).then((function(){localStorage.clear(),be("accessToken",null,{expires:-1}),e({type:We})})).catch((function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0432\u044b\u0445\u043e\u0434\u0430")}))}},Ve=function(e,t,n){return function(a){return a({type:Ae}),(r={email:e,name:t,password:n},fetch("".concat(me,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(r)}).then(pe).then((function(e){return(null===e||void 0===e?void 0:e.success)?e:Promise.reject(e)}))).then((function(e){be("accessToken",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken),a({type:Be,payload:e.user})})).catch((function(e){a({type:qe,payload:e.message})}));var r}},Xe=function(e,t){return function(n){return n({type:Le}),(a={email:e,password:t},fetch("".concat(me,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)}).then(pe).then((function(e){return(null===e||void 0===e?void 0:e.success)?e:Promise.reject(e)}))).then((function(e){be("accessToken",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken),n({type:Pe,payload:e.user})})).catch((function(e){n({type:Fe,payload:e.message})}));var a}},Ke=function(){return function(e){return e({type:Ge}),Oe("".concat(me,"/auth/user"),{headers:{authorization:je("accessToken")}}).then((function(t){e({type:Me,payload:t.user})})).catch((function(t){e({type:ze,payload:t.message})}))}},Ze=function(e){return function(t){return t({type:Je}),(n=e,Oe("".concat(me,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8",authorization:je("accessToken")},body:JSON.stringify(n)})).then((function(e){t({type:He,payload:e.user})})).catch((function(e){t({type:Qe,payload:e.message})}));var n}},$e=function(){var e=Object(i.b)(),t=Object(a.useState)(""),n=Object(y.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),l=Object(y.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)(""),b=Object(y.a)(j,2),m=b[0],O=b[1],x=Object(i.c)((function(e){return e.user.registerUserError}));return Object(_.jsx)("main",{className:Ue.a.container,children:Object(_.jsxs)("div",{className:"pt-6 ".concat(Ue.a.wrapCenter),children:[Object(_.jsx)("h3",{className:"pb-6 text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(_.jsxs)("form",{className:"pb-15 ".concat(Ue.a.form),name:"register",onSubmit:function(t){t.preventDefault(),e(Ve(u,r,m))},children:[Object(_.jsx)("div",{className:"pb-6",children:Object(_.jsx)(p.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){return c(e.target.value)},value:r,name:"name",error:!1,errorText:"",size:"default"})}),Object(_.jsx)("div",{className:"pb-6",children:Object(_.jsx)(p.Input,{type:"email",placeholder:"E-mail",onChange:function(e){return d(e.target.value)},value:u,name:"email",error:!1,errorText:"",size:"default"})}),Object(_.jsx)("div",{className:"pb-6",children:Object(_.jsx)(p.PasswordInput,{onChange:function(e){return O(e.target.value)},value:m,name:"password"})}),Object(_.jsx)("div",{className:"pb-6 ".concat(Ue.a.button),children:Object(_.jsx)(p.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}),x&&Object(_.jsx)("p",{className:"".concat(Ue.a.error," text text_type_main-default pb-6"),children:x})]}),Object(_.jsxs)("div",{className:"".concat(Ue.a.question," text text_type_main-default pb-6"),children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(_.jsx)(o.b,{to:"/login",className:"pl-2 ".concat(Ue.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},et=function(){var e=Object(i.b)(),t=Object(a.useState)(""),n=Object(y.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),l=Object(y.a)(s,2),u=l[0],d=l[1],j=Object(i.c)((function(e){return e.user.loginUserError}));return Object(_.jsx)("main",{className:Ue.a.container,children:Object(_.jsxs)("div",{className:"pt-6 ".concat(Ue.a.wrapCenter),children:[Object(_.jsx)("h3",{className:"pb-6 text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(_.jsxs)("form",{className:"pb-15 ".concat(Ue.a.form),name:"login",onSubmit:function(t){t.preventDefault(),e(Xe(r,u))},children:[Object(_.jsx)("div",{className:"pb-6",children:Object(_.jsx)(p.Input,{type:"email",placeholder:"E-mail",onChange:function(e){return c(e.target.value)},value:r,name:"email",error:!1,errorText:"",size:"default"})}),Object(_.jsx)("div",{className:"pb-6",children:Object(_.jsx)(p.PasswordInput,{onChange:function(e){return d(e.target.value)},value:u,name:"password"})}),Object(_.jsx)("div",{className:"pb-6 ".concat(Ue.a.button),children:Object(_.jsx)(p.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})}),j&&Object(_.jsx)("p",{className:"".concat(Ue.a.error," text text_type_main-default pb-6"),children:j})]}),Object(_.jsxs)("div",{className:"pb-4 ".concat(Ue.a.question," text text_type_main-default"),children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",Object(_.jsx)(o.b,{to:"/register",className:"pl-2 ".concat(Ue.a.link),children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(_.jsxs)("div",{className:"".concat(Ue.a.question," text text_type_main-default pb-6"),children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(_.jsx)(o.b,{to:"/forgot-password",className:"pl-2 ".concat(Ue.a.link),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})},tt=function(){var e=Object(a.useState)(""),t=Object(y.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),s=Object(y.a)(c,2),i=s[0],l=s[1],d=Object(u.g)();return Object(_.jsx)("main",{className:Ue.a.container,children:Object(_.jsxs)("div",{className:"pt-6 ".concat(Ue.a.wrapCenter),children:[Object(_.jsx)("h3",{className:"pb-6 text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(_.jsxs)("form",{className:"pb-15 ".concat(Ue.a.form),name:"login",onSubmit:function(e){var t;e.preventDefault(),l(""),(t={email:n},fetch("".concat(me,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)}).then(pe).then((function(e){return(null===e||void 0===e?void 0:e.success)?e:Promise.reject(e)}))).then((function(){localStorage.setItem("resetPassword",!0),d.replace("/reset-password")})).catch((function(e){return l(e)}))},children:[Object(_.jsx)("div",{className:"pb-6",children:Object(_.jsx)(p.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){return r(e.target.value)},value:n,name:"email",error:!1,errorText:"",size:"default"})}),Object(_.jsx)("div",{className:"pb-6 ".concat(Ue.a.button),children:Object(_.jsx)(p.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})}),i&&Object(_.jsx)("p",{className:"".concat(Ue.a.error," text text_type_main-default pb-6"),children:i})]}),Object(_.jsxs)("div",{className:"".concat(Ue.a.question," text text_type_main-default pb-6"),children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(_.jsx)(o.b,{to:"/login",className:"pl-2 ".concat(Ue.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},nt=n(63),at=n(72),rt=n.n(at),ct=n(46),st=n.n(ct);var it=function(e){var t=Object(i.b)(),n=Object(u.h)();return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(o.c,{exact:!0,to:"/profile",activeClassName:st.a.activeLink,className:"text text_type_main-medium text_color_inactive pt-4 pb-4 ".concat(st.a.link),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(_.jsx)(o.c,{exact:!0,to:"/profile/orders",activeClassName:st.a.activeLink,className:"text text_type_main-medium text_color_inactive pt-4 pb-4 ".concat(st.a.link),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(_.jsx)("button",{className:"text text_type_main-medium text_color_inactive pt-4 pb-4 ".concat(st.a.button),onClick:function(){t(Ye())},children:"\u0412\u044b\u0445\u043e\u0434"}),Object(_.jsx)("p",{className:"pt-20 text text_type_main-default text_color_inactive",children:"/profile"===n.pathname?"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435":"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})},ot=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.user})),n=t.data,r=t.updateUserError,c=Object(a.useState)({name:n.name,email:n.email,password:""}),s=Object(y.a)(c,2),o=s[0],l=s[1];Object(a.useEffect)((function(){e(Ke)}),[e]),Object(a.useEffect)((function(){l((function(e){return Object(te.a)(Object(te.a)({},e),{},{name:(null===n||void 0===n?void 0:n.name)||"",email:(null===n||void 0===n?void 0:n.email)||""})}))}),[n]);var u=o.name!==(null===n||void 0===n?void 0:n.name)||o.email!==(null===n||void 0===n?void 0:n.email)||o.password,d=function(e){l((function(t){return Object(te.a)(Object(te.a)({},t),{},Object(nt.a)({},e.target.name,e.target.value))}))};return Object(_.jsxs)("main",{className:"".concat(Ue.a.container),children:[Object(_.jsx)("div",{className:"mt-30 mr-15 ".concat(rt.a.menu),children:Object(_.jsx)(it,{})}),Object(_.jsxs)("form",{className:"mt-30 ".concat(rt.a.form," ").concat(Ue.a.form),onSubmit:function(t){t.preventDefault(),e(Ze(o)).then((function(){r||l({name:n.name,email:n.email,password:""})}))},children:[Object(_.jsx)("div",{className:"pb-6",children:Object(_.jsx)(p.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:d,value:o.name,name:"name",error:!1,errorText:"",size:"default",icon:"EditIcon"})}),Object(_.jsx)("div",{className:"pb-6",children:Object(_.jsx)(p.Input,{type:"email",placeholder:"E-mail",onChange:d,value:o.email,name:"email",error:!1,errorText:"",size:"default",icon:"EditIcon"})}),Object(_.jsx)("div",{className:"pb-6",children:Object(_.jsx)(p.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:d,value:o.password,name:"password",error:!1,errorText:"",size:"default",icon:"EditIcon"})}),u&&Object(_.jsxs)("div",{className:rt.a.button,children:[Object(_.jsx)(p.Button,{type:"secondary",htmlType:"button",size:"medium",onClick:function(e){e.preventDefault(),l({name:n.name,email:n.email,password:""})},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(_.jsx)(p.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),r&&Object(_.jsx)("p",{className:"".concat(Ue.a.error," pt-5 text text_type_main-default"),children:r})]})]})},lt=n(73),ut=n.n(lt),dt="ORDERS_CONNECTION_INIT",jt="ORDERS_CONNECTION_SUCCESS",bt="ORDERS_CONNECTION_ERROR",mt="ORDERS_CONNECTION_CLOSED",pt="ORDERS_CONNECTION_CLOSE",_t="ORDERS_GET_MESSAGE",Ot=n(125),xt=n.n(Ot),ft=n(31),ht=n.n(ft),gt={pending:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",done:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",created:"\u0421\u043e\u0437\u0434\u0430\u043d"},yt=function(e){var t=e.status,n="";switch(t){case"pending":n="#E52B1A";break;case"done":n="#00CCCC";break;default:n="#F2F2F3"}return Object(_.jsx)("span",{className:"text text_type_main-default pt-2",style:{color:n},children:gt[t]})},vt=n(226),Nt=n(227),Et=n(233),Ct=n(228),Tt=n(231);function Rt(e){return Object(vt.a)(e)?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ".concat(Object(Nt.a)(e,"kk:mm",{locale:Tt.a})):Object(Et.a)(e)?"\u0412\u0447\u0435\u0440\u0430, ".concat(Object(Nt.a)(e,"kk:mm",{locale:Tt.a})):"".concat(Object(Ct.a)(new Date(e),Date.now(),{locale:Tt.a})," \u043d\u0430\u0437\u0430\u0434")}var St=function(e){var t=e.order,n=Object(u.h)(),r=Object(i.c)((function(e){return e.ingredients.data})),c=Object(a.useMemo)((function(){if(!r.length)return null;var e=t.ingredients.reduce((function(e,t){var n=r.find((function(e){return e._id===t}));return n&&e.push(n),e}),[]),n=e.reduce((function(e,t){return e+t.price}),0),a=e.slice(0,6),c=e.length>6?e.length-6:null,s=Rt(t.createdAt);return Object(te.a)(Object(te.a)({},t),{},{ingredientsInfo:e,ingredientsToShow:a,remains:c,total:n,date:s})}),[t,r]);return c?Object(_.jsxs)(o.b,{to:{pathname:"".concat(n.pathname,"/").concat(c.number),state:{background:n}},className:"p-6 mb-4 mr-2 ".concat(ht.a.order),children:[Object(_.jsxs)("div",{className:ht.a.order_info,children:[Object(_.jsxs)("span",{className:"text text_type_digits-default ".concat(ht.a.number),children:["#",String(c.number).padStart(6,"0")]}),Object(_.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:c.date})]}),Object(_.jsx)("h4",{className:"pt-6 text text_type_main-medium ".concat(ht.a.order_name),children:c.name}),"/profile/orders"===n.pathname&&Object(_.jsx)(yt,{status:c.status}),Object(_.jsxs)("div",{className:"pt-6 ".concat(ht.a.order_content),children:[Object(_.jsx)("ul",{className:ht.a.ingredients,children:c.ingredientsToShow.map((function(e,t){var n=6-t,a=20*t;return Object(_.jsxs)("li",{className:ht.a.img_wrap,style:{zIndex:n,right:a},children:[Object(_.jsx)("img",{style:{opacity:c.remains&&6===t+1?"0.5":"1"},className:ht.a.img,src:e.image_mobile,alt:e.name}),6===t+1?Object(_.jsx)("span",{className:"text text_type_digits-default ".concat(ht.a.remains),children:c.remains>0?"+".concat(c.remains):null}):null]},t)}))}),Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{className:"text text_type_digits-default pr-1 ".concat(ht.a.order_total),children:c.total}),Object(_.jsx)(p.CurrencyIcon,{type:"primary"})]})]})]}):null},It=function(e){var t=e.orders.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}));return Object(_.jsx)("div",{className:"".concat(xt.a.content),children:t.map((function(e){return Object(_.jsx)(St,{order:e},e._id)}))})},kt=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.orders.data}));return Object(a.useEffect)((function(){var t=je("accessToken");if(t)return e({type:dt,payload:"".concat("wss://norma.nomoreparties.space/orders","?token=").concat(t.replace("Bearer ",""))}),function(){e({type:pt})}}),[e]),Object(_.jsxs)("main",{className:"".concat(ut.a.main),children:[Object(_.jsx)("div",{className:"mt-30 mr-15 ".concat(ut.a.menu),children:Object(_.jsx)(it,{})}),Object(_.jsx)("div",{className:"mt-10 ".concat(ut.a.orders),children:Object(_.jsx)(It,{orders:t})})]})},wt=n(129),Ut=["onlyUnAuth","children"],Dt=function(e){var t=e.onlyUnAuth,n=void 0!==t&&t,a=e.children,r=Object(wt.a)(e,Ut),c=Object(i.c)((function(e){return e.user.isAuthChecked})),s=Object(i.c)((function(e){return e.user.data})),o=Object(u.h)();if(!c)return Object(_.jsx)(Se,{});if(n&&s){var l=(o.state||{from:{pathname:"/"}}).from;return Object(_.jsx)(u.b,Object(te.a)(Object(te.a)({},r),{},{children:Object(_.jsx)(u.a,{to:l})}))}return n||s?Object(_.jsx)(u.b,Object(te.a)(Object(te.a)({},r),{},{children:a})):Object(_.jsx)(u.b,Object(te.a)(Object(te.a)({},r),{},{children:Object(_.jsx)(u.a,{to:{pathname:"/login",state:{from:o}}})}))},At=n(29),Bt=n.n(At),qt=function(){var e=Object(u.i)().id,t=Object(i.c)((function(t){return t.ingredients.data.find((function(t){return t._id===e}))}));if(!t)return Object(_.jsx)(Se,{});var n=t.name,a=t.image_large,r=t.description,c=t.calories,s=t.proteins,o=t.fat,l=t.carbohydrates;return Object(_.jsxs)("div",{className:Bt.a.content,children:[Object(_.jsx)("img",{className:Bt.a.img,alt:"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430.",src:a}),Object(_.jsx)("h3",{className:"text text_type_main-medium mt-2 mb-4",children:n}),Object(_.jsx)("p",{className:"text text_type_main-default mb-4",children:r}),Object(_.jsxs)("ul",{className:"".concat(Bt.a.nutritional_values," text_type_main-default"),children:[Object(_.jsxs)("li",{className:Bt.a.nutritional_value,children:[Object(_.jsx)("p",{className:"text mb-2 ".concat(Bt.a.text),children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(_.jsx)("p",{className:"text text_type_digits-default",children:c})]}),Object(_.jsxs)("li",{className:Bt.a.nutritional_value,children:[Object(_.jsx)("p",{className:"text mb-2 ".concat(Bt.a.text),children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(_.jsx)("p",{className:"text text_type_digits-default",children:s})]}),Object(_.jsxs)("li",{className:Bt.a.nutritional_value,children:[Object(_.jsx)("p",{className:"text mb-2 ".concat(Bt.a.text),children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(_.jsx)("p",{className:"text text_type_digits-default",children:o})]}),Object(_.jsxs)("li",{className:Bt.a.nutritional_value,children:[Object(_.jsx)("p",{className:"text mb-2 ".concat(Bt.a.text),children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(_.jsx)("p",{className:"text text_type_digits-default",children:l})]})]})]})},Lt=function(){var e=Object(u.g)(),t=Object(a.useState)(""),n=Object(y.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),i=Object(y.a)(s,2),l=i[0],d=i[1],j=Object(a.useState)(null),b=Object(y.a)(j,2),m=b[0],O=b[1];return Object(a.useEffect)((function(){localStorage.getItem("resetPassword")||e.replace("/forgot-password")}),[e]),Object(_.jsx)("main",{className:Ue.a.container,children:Object(_.jsxs)("div",{className:"pt-6 ".concat(Ue.a.wrapCenter),children:[Object(_.jsx)("h3",{className:"pb-6 text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(_.jsxs)("form",{className:"pb-15 ".concat(Ue.a.form),name:"login",onSubmit:function(t){var n;t.preventDefault(),O(""),(n={password:r,token:l},fetch("".concat(me,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)}).then(pe).then((function(e){return(null===e||void 0===e?void 0:e.success)?e:Promise.reject(e)}))).then((function(){localStorage.removeItem("resetPassword"),e.push("/login")})).catch((function(e){return O(e)}))},children:[Object(_.jsx)("div",{className:"pb-6",children:Object(_.jsx)(p.PasswordInput,{onChange:function(e){return c(e.target.value)},value:r,name:"password"})}),Object(_.jsx)("div",{className:"pb-6",children:Object(_.jsx)(p.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:function(e){return d(e.target.value)},value:l,name:"token",error:!1,errorText:"",size:"default"})}),Object(_.jsx)("div",{className:"pb-6 ".concat(Ue.a.button),children:Object(_.jsx)(p.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),m&&Object(_.jsx)("p",{className:"".concat(Ue.a.error," text text_type_main-default pb-6"),children:m})]}),Object(_.jsxs)("div",{className:"".concat(Ue.a.question," text text_type_main-default pb-6"),children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(_.jsx)(o.b,{to:"/login",className:"pl-2 ".concat(Ue.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Pt=n(32),Ft=n.n(Pt),Gt=function(){var e=Object(u.i)().number,t=Object(i.b)(),n=Object(i.c)((function(e){return e.ingredients.data})),r=Object(i.c)((function(t){var n;if(t.orders.isOpen&&t.orders.data.length){var a=t.orders.data.find((function(t){return t.number===+e}));if(a)return a}if(t.feed.isOpen&&t.feed.orders.length){var r=t.feed.orders.find((function(t){return t.number===+e}));if(r)return r}return(null===(n=t.order.orderByNumber)||void 0===n?void 0:n.number)===+e?t.order.orderByNumber:null}));Object(a.useEffect)((function(){r||t(Ce(e))}),[t,r,e]);var c=Object(a.useMemo)((function(){if(!r||!n.length)return null;var e=Rt(r.createdAt),t=r.ingredients.reduce((function(e,t){if(e[t])e[t].count++;else{var a=n.find((function(e){return e._id===t}));a&&(e[t]=Object(te.a)(Object(te.a)({},a),{},{count:1}))}return e}),{}),a=Object.values(t).reduce((function(e,t){return e+t.price*t.count}),0);return Object(te.a)(Object(te.a)({},r),{},{ingredientsInfo:t,date:e,total:a})}),[r,n]);return c?Object(_.jsxs)("div",{className:Ft.a.wrap,children:[Object(_.jsx)("h3",{className:"text text_type_main-medium  pb-3 pt-10 ".concat(Ft.a.header),children:c.name}),Object(_.jsx)(yt,{status:c.status}),Object(_.jsx)("p",{className:"text text_type_main-medium pt-15 pb=6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(_.jsx)("ul",{className:"".concat(Ft.a.list," mb-8"),children:Object.values(c.ingredientsInfo).map((function(e,t){return Object(_.jsxs)("li",{className:"pb-4 pr-6 ".concat(Ft.a.item),children:[Object(_.jsx)("div",{className:Ft.a.img_wrap,children:Object(_.jsx)("div",{className:Ft.a.border,children:Object(_.jsx)("img",{className:Ft.a.img,src:e.image_mobile,alt:e.name})})}),Object(_.jsx)("span",{className:"text text_type_main-default pl-4",children:e.name}),Object(_.jsxs)("span",{className:"text text_type_digits-default pl-4 pr-4 ".concat(Ft.a.quantity),children:[e.count," x ",e.price]}),Object(_.jsx)(p.CurrencyIcon,{type:"primary"})]},t)}))}),Object(_.jsxs)("div",{className:Ft.a.bottom,children:[Object(_.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:c.date}),Object(_.jsx)("span",{className:"text text_type_digits-default pr-4 ".concat(Ft.a.total),children:c.total}),Object(_.jsx)(p.CurrencyIcon,{type:"primary"})]})]}):Object(_.jsx)(Se,{})},Mt=function(){return Object(_.jsx)("h3",{className:"pb-6 text text_type_main-large",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430. \u041e\u0448\u0438\u0431\u043a\u0430 404."})},zt=n(47),Jt=n.n(zt),Ht=n(38),Qt=n.n(Ht),Wt=function(e){var t=e.orders,n=e.title,a=e.textColor;return Object(_.jsxs)("div",{className:"pr-6 ".concat(Qt.a.column),children:[Object(_.jsxs)("h3",{className:"text text_type_main-medium ".concat(Qt.a.title),children:[n,":"]}),Object(_.jsx)("ul",{className:"pt-6  ".concat(Qt.a.list),children:t.map((function(e,t){return Object(_.jsx)("li",{className:"text text_type_digits-default ".concat(Qt.a.list_item),style:{color:"blue"===a?"#00cccc":"#F2F2F3"},children:e},t)}))})]})},Yt=function(e){var t=e.title,n=e.content;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("h3",{className:"pt-15 text text_type_main-medium ".concat(Qt.a.title),children:[t,":"]}),Object(_.jsx)("p",{className:"text text_type_digits-large ".concat(Qt.a.content),children:n})]})},Vt=function(e,t){return e.filter((function(e){return e.status===t})).map((function(e){return e.number})).slice(0,20)},Xt=function(){var e=Object(i.c)((function(e){return e.feed})),t=e.total,n=e.totalToday,a=Object(i.c)((function(e){return Vt(e.feed.orders,"done")})),r=Object(i.c)((function(e){return Vt(e.feed.orders,"pending")}));return Object(_.jsxs)("section",{children:[Object(_.jsxs)("div",{className:Qt.a.columns,children:[Object(_.jsx)(Wt,{orders:a,title:"\u0413\u043e\u0442\u043e\u0432\u044b",textColor:"blue"}),Object(_.jsx)(Wt,{orders:r,title:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"})]}),Object(_.jsx)(Yt,{title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f",content:t}),Object(_.jsx)(Yt,{title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f",content:n})]})},Kt="FEED_CONNECTION_INIT",Zt="FEED_CONNECTION_SUCCESS",$t="FEED_CONNECTION_ERROR",en="FEED_CONNECTION_CLOSED",tn="FEED_CONNECTION_CLOSE",nn="FEED_GET_MESSAGE",an=function(){var e=Object(i.b)();Object(a.useEffect)((function(){return e({type:Kt,payload:"wss://norma.nomoreparties.space/orders/all"}),function(){e({type:tn})}}),[e]);var t=Object(i.c)((function(e){return e.feed.orders}));return t.length?Object(_.jsxs)("main",{className:Jt.a.containerMain,children:[Object(_.jsx)("h1",{className:"".concat(Jt.a.title," text text_type_main-large mt-10 mb-5"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(_.jsxs)("div",{className:Jt.a.main,children:[Object(_.jsx)("div",{className:Jt.a.columnOrders,children:Object(_.jsx)(It,{orders:t})}),Object(_.jsx)("div",{className:Jt.a.columnInfo,children:Object(_.jsx)(Xt,{})})]})]}):Object(_.jsx)(Se,{})},rn="GET_INGREDIENTS_REQIEST",cn="GET_INGREDIENTS_SUCCESS",sn="GET_INGREDIENTS_FAILED",on=function(){return function(e){return e({type:rn}),fetch("".concat(me,"/ingredients")).then(pe).then((function(e){return(null===e||void 0===e?void 0:e.success)?e.data:Promise.reject(e)})).then((function(t){e({type:cn,payload:t})})).catch((function(t){e({type:sn,payload:t})}))}},ln=function(){var e,t,n=Object(i.b)(),r=Object(u.g)(),c=Object(u.h)(),s=c.state&&c.state.background,o=null===(e=Object(u.j)(["/profile/orders/:number","/feed/:number"]))||void 0===e||null===(t=e.params)||void 0===t?void 0:t.number,l=function(){return r.goBack()};return Object(a.useEffect)((function(){n(on()),n((function(e){je("accessToken")?e(Ke()).finally((function(){e({type:De})})):e({type:De})}))}),[n]),Object(_.jsxs)("div",{className:j.a.app,children:[Object(_.jsx)(O,{}),Object(_.jsxs)(u.d,{location:s||c,children:[Object(_.jsx)(Dt,{path:"/profile",exact:!0,children:Object(_.jsx)(ot,{})}),Object(_.jsx)(Dt,{path:"/profile/orders",exact:!0,children:Object(_.jsx)(kt,{})}),Object(_.jsx)(Dt,{path:"/profile/orders/:number",exact:!0,children:Object(_.jsxs)("div",{className:j.a.detailPageWrap,children:[Object(_.jsxs)("p",{className:"text text_type_digits-default ".concat(j.a.detailHeader),children:["#",o&&o.padStart(6,"0")]}),Object(_.jsx)(Gt,{})]})}),Object(_.jsx)(Dt,{onlyUnAuth:!0,path:"/register",exact:!0,children:Object(_.jsx)($e,{})}),Object(_.jsx)(Dt,{onlyUnAuth:!0,path:"/login",exact:!0,children:Object(_.jsx)(et,{})}),Object(_.jsx)(Dt,{onlyUnAuth:!0,path:"/forgot-password",exact:!0,children:Object(_.jsx)(tt,{})}),Object(_.jsx)(Dt,{onlyUnAuth:!0,path:"/reset-password",exact:!0,children:Object(_.jsx)(Lt,{})}),Object(_.jsx)(u.b,{path:"/ingredients/:id",exact:!0,children:Object(_.jsxs)("div",{className:j.a.detailPageWrap,children:[Object(_.jsx)("p",{className:"text text_type_main-large ".concat(j.a.detailHeader),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(_.jsx)(qt,{})]})}),Object(_.jsx)(u.b,{path:"/feed",exact:!0,children:Object(_.jsx)(an,{})}),Object(_.jsx)(u.b,{path:"/feed/:number",exact:!0,children:Object(_.jsxs)("div",{className:j.a.detailPageWrap,children:[Object(_.jsxs)("p",{className:"text text_type_digits-default ".concat(j.a.detailHeader),children:["#",o&&o.padStart(6,"0")]}),Object(_.jsx)(Gt,{})]})}),Object(_.jsx)(u.b,{path:"/",exact:!0,children:Object(_.jsx)(ke,{})}),Object(_.jsx)(u.b,{children:Object(_.jsx)("div",{className:j.a.detailPageWrap,children:Object(_.jsx)(Mt,{})})})]}),s&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(u.b,{path:"/ingredients/:id",exact:!0,children:Object(_.jsx)(Y,{onClose:l,title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:Object(_.jsx)(qt,{})})}),Object(_.jsx)(Dt,{path:"/profile/orders/:number",exact:!0,children:Object(_.jsx)(Y,{onClose:l,title:"#".concat(o&&o.padStart(6,"0")),children:Object(_.jsx)(Gt,{})})}),Object(_.jsx)(u.b,{path:"/feed/:number",exact:!0,children:Object(_.jsx)(Y,{onClose:l,title:"#".concat(o&&o.padStart(6,"0")),children:Object(_.jsx)(Gt,{})})})]})]})},un=n(36),dn=n(127),jn=n(126),bn=function(e){return function(t){var n=null,a=e.wsInit,r=e.wsClose,c=e.wsSendMessage,s=e.onOpen,i=e.onClose,o=e.onError,l=e.onMessage;return function(e){return function(u){var d=t.dispatch,j=u.type,b=u.payload;j===a&&((n=new WebSocket(b)).onopen=function(e){d({type:s,payload:e})},n.onerror=function(e){d({type:o,payload:e})},n.onmessage=function(e){var t=e.data,n=JSON.parse(t);d({type:l,payload:{data:n,timestamp:(new Date).getTime()/100}})},n.onclose=function(e){d({type:i,payload:e})}),r&&j===r&&n&&n.close(),c&&j===c&&n&&n.send(JSON.stringify(b)),e(u)}}}},mn={data:[],isLoading:!1,error:null},pn={bun:null,ingredients:[]},_n={data:null,isLoading:!1,error:null,orderByNumber:null,isOrderByNumberLoading:!1,orderByNumberError:null},On={data:[],isOpen:!1,error:null},xn={orders:[],total:0,totalToday:0,isOpen:!1,error:null},fn={isAuthChecked:!1,data:null,registerUserError:null,registerUserRequest:!1,loginUserError:null,loginUserRequest:!1,updateUserError:null,updateUserRequest:!1,getUserError:null,getUserRequest:!1},hn=Object(un.combineReducers)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rn:return Object(te.a)(Object(te.a)({},e),{},{isLoading:!0,error:null});case cn:return Object(te.a)(Object(te.a)({},e),{},{data:t.payload,isLoading:!1,error:null});case sn:return Object(te.a)(Object(te.a)({},e),{},{isLoading:!1,error:t.payload});default:return e}},burgerConstructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return"bun"===t.payload.type?Object(te.a)(Object(te.a)({},e),{},{bun:t.payload}):Object(te.a)(Object(te.a)({},e),{},{ingredients:[].concat(Object(L.a)(e.ingredients),[t.payload])});case re:return Object(te.a)(Object(te.a)({},e),{},{ingredients:[].concat(Object(L.a)(e.ingredients.slice(0,t.payload)),Object(L.a)(e.ingredients.slice(t.payload+1)))});case ce:var n=Object(L.a)(e.ingredients);return n.splice(t.payload.to,0,n.splice(t.payload.from,1)[0]),Object(te.a)(Object(te.a)({},e),{},{ingredients:n});case se:return pn;default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return Object(te.a)(Object(te.a)({},e),{},{isLoading:!0,error:null});case fe:return Object(te.a)(Object(te.a)({},e),{},{data:t.payload,isLoading:!1,error:null});case he:return Object(te.a)(Object(te.a)({},e),{},{isLoading:!1,error:t.payload});case Ne:return _n;case ge:return Object(te.a)(Object(te.a)({},e),{},{isOrderByNumberLoading:!0,orderByNumberError:null});case ye:return Object(te.a)(Object(te.a)({},e),{},{orderByNumber:t.payload.orders[0],isOrderByNumberLoading:!1,orderByNumberError:null});case ve:return Object(te.a)(Object(te.a)({},e),{},{isOrderByNumberLoading:!1,orderByNumberError:t.payload});default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:On,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jt:return Object(te.a)(Object(te.a)({},e),{},{isOpen:!0,error:null});case bt:return Object(te.a)(Object(te.a)({},e),{},{error:t.payload});case mt:return Object(te.a)(Object(te.a)({},e),{},{isOpen:!1});case _t:return Object(te.a)(Object(te.a)({},e),{},{data:t.payload.data.orders});default:return e}},feed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zt:return Object(te.a)(Object(te.a)({},e),{},{isOpen:!0,error:null});case $t:return Object(te.a)(Object(te.a)({},e),{},{error:t.payload});case en:return Object(te.a)(Object(te.a)({},e),{},{isOpen:!1});case nn:return Object(te.a)(Object(te.a)({},e),{},{orders:t.payload.data.orders,total:t.payload.data.total,totalToday:t.payload.data.totalToday});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case De:return Object(te.a)(Object(te.a)({},e),{},{isAuthChecked:!0});case We:return Object(te.a)(Object(te.a)({},e),{},{data:null});case Ae:return Object(te.a)(Object(te.a)({},e),{},{registerUserRequest:!0,registerUserError:null});case Be:return Object(te.a)(Object(te.a)({},e),{},{registerUserRequest:!1,data:t.payload,isAuthChecked:!0});case qe:return Object(te.a)(Object(te.a)({},e),{},{registerUserRequest:!1,registerUserError:t.payload});case Le:return Object(te.a)(Object(te.a)({},e),{},{loginUserRequest:!0,loginUserError:null});case Pe:return Object(te.a)(Object(te.a)({},e),{},{loginUserRequest:!1,data:t.payload,isAuthChecked:!0});case Fe:return Object(te.a)(Object(te.a)({},e),{},{loginUserRequest:!1,loginUserError:t.payload});case Me:return Object(te.a)(Object(te.a)({},e),{},{getUserRequest:!1,data:t.payload});case ze:return Object(te.a)(Object(te.a)({},e),{},{getUserRequest:!1,getUserError:t.payload});case Ge:return Object(te.a)(Object(te.a)({},e),{},{getUserRequest:!0,getUserError:null});case Je:return Object(te.a)(Object(te.a)({},e),{},{updateUserRequest:!0,updateUserError:null});case He:return Object(te.a)(Object(te.a)({},e),{},{updateUserRequest:!1,data:t.payload});case Qe:return Object(te.a)(Object(te.a)({},e),{},{updateUserRequest:!1,updateUserError:t.payload});default:return e}}}),gn={wsInit:dt,wsClose:pt,onOpen:jt,onClose:mt,onError:bt,onMessage:_t},yn={wsInit:Kt,wsClose:tn,onOpen:Zt,onClose:en,onError:$t,onMessage:nn},vn=Object(un.createStore)(hn,Object(jn.composeWithDevTools)(Object(un.applyMiddleware)(dn.a,bn(gn),bn(yn))));s.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(o.a,{children:Object(_.jsx)(i.a,{store:vn,children:Object(_.jsx)(ln,{})})})}),document.getElementById("root")),l()},28:function(e,t,n){e.exports={header:"app-header_header__1iHLW",menu:"app-header_menu__3SLom",menu_part_left:"app-header_menu_part_left__2YXg6",link:"app-header_link__2y8TU",link_active:"app-header_link_active__vLEYL",link_position_last:"app-header_link_position_last__3skWP",logo:"app-header_logo__zVEfY"}},29:function(e,t,n){e.exports={content:"ingredient-details_content__WdJuD",nutritional_values:"ingredient-details_nutritional_values__3FKHu",nutritional_value:"ingredient-details_nutritional_value__8pb6e"}},31:function(e,t,n){e.exports={ingredients:"order-card_ingredients__20T5_",order:"order-card_order__3rqYV",order_info:"order-card_order_info__29lCi",order_name:"order-card_order_name__3YBR3",order_content:"order-card_order_content__34Qw-",order_total:"order-card_order_total__1jVgt",img_wrap:"order-card_img_wrap__1acsa",img:"order-card_img__3_go7",remains:"order-card_remains__8DEtg"}},32:function(e,t,n){e.exports={wrap:"order-info_wrap__Gkezw",number:"order-info_number__osrir",status:"order-info_status__wcc9g",header:"order-info_header__1sYHj",img_wrap:"order-info_img_wrap__2AgMB",border:"order-info_border__3fQfd",img:"order-info_img__3xY-m",item:"order-info_item__AxHy8",quantity:"order-info_quantity__1fXgZ",list:"order-info_list__3DYZ3",bottom:"order-info_bottom__3Q0Uw",total:"order-info_total__1krhW"}},35:function(e,t,n){e.exports={app:"app_app__M9MMq",detailPageWrap:"app_detailPageWrap__11w5w",detailHeader:"app_detailHeader__1E_IA"}},38:function(e,t,n){e.exports={columns:"feed-info_columns__CzEBR",column:"feed-info_column__J1dB_",list:"feed-info_list__1JWvG",title:"feed-info_title__WE0nW",list_item:"feed-info_list_item__yrN7o",content:"feed-info_content__3s65D"}},45:function(e,t,n){e.exports={modal:"modal_modal__1DF1f",header:"modal_header__2iX3r",button:"modal_button__3_zvg",img:"modal_img__3f0Go",content:"modal_content__1tQ-X"}},46:function(e,t,n){e.exports={link:"profile-menu_link__1GXQJ",activeLink:"profile-menu_activeLink__1Ahyy",button:"profile-menu_button__10VBY"}},47:function(e,t,n){e.exports={containerMain:"feed_containerMain__3I4JH",title:"feed_title__yRxeu",main:"feed_main__3gURw",columnOrders:"feed_columnOrders__TBoiM",columnInfo:"feed_columnInfo__QUvCU"}},54:function(e,t,n){e.exports={article:"burger-ingredient_article__wQtAl",cost:"burger-ingredient_cost__2ItX8",text:"burger-ingredient_text__1IAaT"}},68:function(e,t,n){e.exports={containerMain:"main_containerMain__1lR2l",title:"main_title__89vkE",main:"main_main__tvROX"}},69:function(e,t,n){e.exports={burger_ingredients:"burger-ingredients_burger_ingredients__3HExk",tab:"burger-ingredients_tab__1Ru1Z",content:"burger-ingredients_content__1rMpp",menu:"burger-ingredients_menu__3KO37",categories:"burger-ingredients_categories__1eVbp"}},71:function(e,t,n){e.exports={img:"order-details_img__1gAbq",title:"order-details_title__FoYOr",text:"order-details_text__ZLZ7C"}},72:function(e,t,n){e.exports={menu:"profile_menu__xxfx5",form:"profile_form__3yKlC"}},73:function(e,t,n){e.exports={menu:"profile-orders_menu__HR8A_",main:"profile-orders_main__3CNRY",orders:"profile-orders_orders__2ocR4"}},9:function(e,t,n){e.exports={container:"common_container__seYK4",wrapCenter:"common_wrapCenter__2WDKE",form:"common_form__2Qchh",title:"common_title__1CsDV",button:"common_button__2HgCs",question:"common_question__lOmQ9",link:"common_link__2bwt_",error:"common_error__2wD2J"}},95:function(e,t,n){e.exports={element:"burger-constructor-element_element__3xJw4",element_fullwidth:"burger-constructor-element_element_fullwidth__357JV"}},97:function(e,t,n){e.exports={preloader:"preloader_preloader__16lUt",preloader_circle:"preloader_preloader_circle__1bfiA",spin:"preloader_spin__IM9Nd"}}},[[217,1,2]]]);
//# sourceMappingURL=main.f83f83c5.chunk.js.map